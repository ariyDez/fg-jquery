{"version":3,"sources":["CreditApplication.js"],"names":["e","preventDefault","factory","module","exports","global","document","creditApplication","step","data","this","window","noGlobal","DOMEval","code","doc","$","get","inputs","arr","getProto","Object","getPrototypeOf","slice","push","indexOf","class2type","toString","hasOwn","hasOwnProperty","fnToString","ObjectFunctionString","call","support","console","jQuery","fn","init","selector","context"],"mappings":"waAAAA,SAAAC,EAAAC,GAMI,aAHJ,iBAAAC,GAAA,iBAAAA,EAAAC,QAGID,EAAAC,QAAAC,EAAAC,SAAMC,EAAAA,GAAAA,eACNA,IAAAA,EAAAA,SAJJ,MAAA,IAAAC,MAAA,4CAOUC,OAAAA,EAAAA,IAGTP,EAAAG,GAbDL,4BAyBeS,OAAMC,KAAA,SAAAC,EAAAC,GAAA,aAsBhB,SAAAC,EAAAC,EAAAC,iCAlBG,UAsBAC,EAAAA,KAAEC,EApBEC,EAAAA,KAAAA,YAAAA,GAAAA,WAAAA,YAAAA,s7UANS,IAAAC,MAIcb,GAAAK,EAAAL,SAZ3Bc,GAAAC,OAAAC,eAEGC,GAAAJ,GAAAI,MAEFL,GAAAA,GAAAA,OAmBAM,GAAAL,GAAAK,KAfYC,GAAAN,GAAAM,QAAAC,MAAAC,GAAAD,GAAAC,SAAAC,GAAAF,GAAAG,eAAAC,GAAAF,GAAAD,SAAAI,GAAAD,GAAAE,KAAAX,QAAAY,MAAAC,GAAAA,SAAAA,EAAAzB,GAAA,OAAA,IAAA0B,GAAAC,GAAAC,KAAAC,EAAAC,0IAAAvB,+pCAAAA","file":"CreditApplication.js","sourcesContent":["import jQuery from 'jquery'\n\nwindow.jQuery = window.$ = jQuery;\n$('#send').click(function(e){\n    e.preventDefault();\n    const data = $('#formData').serialize();\n    const creditApplication = new CreditApplication();\n    creditApplication.send(data);\n});\nfunction send() {\n    const data = $('#formData').serialize();\n    const creditApplication = new CreditApplication();\n    creditApplication.send(data);\n}\nlet instance = null;\nclass CreditApplication {\n    constructor() {\n        this.apiUrl = 'http://127.0.0.1:3000/api';\n        this.step = 0;\n        if(!instance) {\n            instance = this;\n        }\n        return instance;\n    }\n\n    renderForm(data) {\n        const $root = $('#askartec-form');\n        let inputs = '';\n        const step = data;\n        for (let stepData of step) {\n            const inputsData = stepData.inputs;\n            inputs += stepData.label ? `<h2>${stepData.label}</h2>` : '';\n            for (let key in inputsData) {\n                const input = inputsData[key];\n                inputs += `<div class=\"askartec-form-group\">\n                    <label for=\"${input.id}\">${input.label}${input.required ? '*' : ''}:</label>\n                    <input type='${input.type}' name='${input.name}' ${input.required ? 'required' : ''} id='${input.id}'>\n                    </div>`;\n            }\n\n        }\n        const form = `<form id=\"formData\">\n                    ${inputs}\n                    <input type=\"hidden\" name=\"step\" value=\"${this.step}\">\n                    <button onclick=\"send(); return false;\">Send</button>\n                </form>`;\n        $root.html(form);\n    }\n\n    init() {\n        const mainObject = this;\n        $.get(`${this.apiUrl}/creditApplication`)\n            .done(function (data) {\n                console.log(data);\n                this.step = 1;\n                mainObject.renderForm(data);\n            });\n    }\n\n    send(data) {\n        const mainObject = this;\n        $.post(`${this.apiUrl}/changeStep`, data)\n            .done(function (data) {\n                \"use strict\";\n                console.log(data);\n                this.step++;\n                mainObject.renderForm(data);\n            })\n            .fail(function (error) {\n                \"use strict\";\n                console.log(error);\n            })\n    }\n}\n\nmodule.exports = CreditApplication;\n\n"]}